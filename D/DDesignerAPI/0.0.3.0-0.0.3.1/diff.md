# Comparing `tmp/DDesignerAPI-0.0.3.0-py3-none-any.whl.zip` & `tmp/DDesignerAPI-0.0.3.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,31 +1,31 @@
-Zip file size: 49694 bytes, number of entries: 29
+Zip file size: 49988 bytes, number of entries: 29
 -rw-rw-r--  2.0 unx      962 b- defN 23-May-22 07:59 ddesigner_api/__init__.py
 -rw-rw-r--  2.0 unx      725 b- defN 23-May-22 07:59 ddesigner_api/numpy/__init__.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-May-22 07:59 ddesigner_api/numpy/examples/__init__.py
 -rw-rw-r--  2.0 unx     2583 b- defN 23-May-22 07:59 ddesigner_api/numpy/examples/examples_numpy.py
 -rw-rw-r--  2.0 unx      738 b- defN 23-May-22 07:59 ddesigner_api/numpy/xwn/__init__.py
 -rw-rw-r--  2.0 unx     4852 b- defN 23-May-22 07:59 ddesigner_api/numpy/xwn/optimization.py
 -rw-rw-r--  2.0 unx      770 b- defN 23-May-22 07:59 ddesigner_api/pytorch/__init__.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-May-22 07:59 ddesigner_api/pytorch/examples/__init__.py
 -rw-rw-r--  2.0 unx     7416 b- defN 23-May-22 07:59 ddesigner_api/pytorch/examples/examples_pytorch.py
 -rw-rw-r--  2.0 unx      736 b- defN 23-May-22 07:59 ddesigner_api/pytorch/xwn/__init__.py
 -rw-rw-r--  2.0 unx    65337 b- defN 23-May-22 07:59 ddesigner_api/pytorch/xwn/torch_nn.py
 -rw-rw-r--  2.0 unx     5223 b- defN 23-May-22 07:59 ddesigner_api/pytorch/xwn/torch_opt.py
 -rw-rw-r--  2.0 unx      873 b- defN 23-May-22 07:59 ddesigner_api/tensorflow/__init__.py
 -rw-rw-r--  2.0 unx    15071 b- defN 23-May-22 07:59 ddesigner_api/tensorflow/dpi_blocks.py
--rw-rw-r--  2.0 unx    10164 b- defN 23-May-22 07:59 ddesigner_api/tensorflow/dpi_layers.py
+-rw-rw-r--  2.0 unx    11447 b- defN 23-Jun-30 08:40 ddesigner_api/tensorflow/dpi_layers.py
 -rw-rw-r--  2.0 unx        0 b- defN 23-May-22 07:59 ddesigner_api/tensorflow/examples/__init__.py
 -rw-rw-r--  2.0 unx     7883 b- defN 23-May-22 07:59 ddesigner_api/tensorflow/examples/examples_keras.py
 -rw-rw-r--  2.0 unx     3021 b- defN 23-May-22 07:59 ddesigner_api/tensorflow/examples/examples_tensorflow.py
 -rw-rw-r--  2.0 unx      790 b- defN 23-May-22 07:59 ddesigner_api/tensorflow/xwn/__init__.py
 -rw-rw-r--  2.0 unx    16354 b- defN 23-May-22 07:59 ddesigner_api/tensorflow/xwn/base_conv.py
 -rw-rw-r--  2.0 unx    29476 b- defN 23-May-22 07:59 ddesigner_api/tensorflow/xwn/keras_layers.py
 -rw-rw-r--  2.0 unx     5083 b- defN 23-May-22 07:59 ddesigner_api/tensorflow/xwn/keras_opt.py
 -rw-rw-r--  2.0 unx     9240 b- defN 23-May-22 07:59 ddesigner_api/tensorflow/xwn/tf_nn.py
 -rw-rw-r--  2.0 unx     4167 b- defN 23-May-22 07:59 ddesigner_api/tensorflow/xwn/tf_opt.py
--rwxrwxr-x  2.0 unx     9136 b- defN 23-May-22 09:01 DDesignerAPI-0.0.3.0.dist-info/LICENSE
--rw-rw-r--  2.0 unx     7251 b- defN 23-May-22 09:01 DDesignerAPI-0.0.3.0.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 23-May-22 09:01 DDesignerAPI-0.0.3.0.dist-info/WHEEL
--rw-rw-r--  2.0 unx       14 b- defN 23-May-22 09:01 DDesignerAPI-0.0.3.0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2736 b- defN 23-May-22 09:01 DDesignerAPI-0.0.3.0.dist-info/RECORD
-29 files, 210693 bytes uncompressed, 45164 bytes compressed:  78.6%
+-rwxrwxr-x  2.0 unx     9136 b- defN 23-Jun-30 08:43 DDesignerAPI-0.0.3.1.dist-info/LICENSE
+-rw-rw-r--  2.0 unx     7251 b- defN 23-Jun-30 08:43 DDesignerAPI-0.0.3.1.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 23-Jun-30 08:43 DDesignerAPI-0.0.3.1.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       14 b- defN 23-Jun-30 08:43 DDesignerAPI-0.0.3.1.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2736 b- defN 23-Jun-30 08:43 DDesignerAPI-0.0.3.1.dist-info/RECORD
+29 files, 211976 bytes uncompressed, 45458 bytes compressed:  78.6%
```

## zipnote {}

```diff
@@ -66,23 +66,23 @@
 
 Filename: ddesigner_api/tensorflow/xwn/tf_nn.py
 Comment: 
 
 Filename: ddesigner_api/tensorflow/xwn/tf_opt.py
 Comment: 
 
-Filename: DDesignerAPI-0.0.3.0.dist-info/LICENSE
+Filename: DDesignerAPI-0.0.3.1.dist-info/LICENSE
 Comment: 
 
-Filename: DDesignerAPI-0.0.3.0.dist-info/METADATA
+Filename: DDesignerAPI-0.0.3.1.dist-info/METADATA
 Comment: 
 
-Filename: DDesignerAPI-0.0.3.0.dist-info/WHEEL
+Filename: DDesignerAPI-0.0.3.1.dist-info/WHEEL
 Comment: 
 
-Filename: DDesignerAPI-0.0.3.0.dist-info/top_level.txt
+Filename: DDesignerAPI-0.0.3.1.dist-info/top_level.txt
 Comment: 
 
-Filename: DDesignerAPI-0.0.3.0.dist-info/RECORD
+Filename: DDesignerAPI-0.0.3.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ddesigner_api/tensorflow/dpi_layers.py

```diff
@@ -309,7 +309,49 @@
         x = self.conv(inputs)
         x = tf.nn.depth_to_space(x, self.sr)
         return x
 
     def get_config(self):
         cfg = super().get_config()
         return cfg
+
+
+class EmbeddingCosineSimilarity(layers.Layer):
+    def __init__(
+        self,
+        classes:int,
+        initializer='glorot_uniform',
+        regularizer=None,
+        dtype='float32',
+        **kwargs
+    ):
+        super(EmbeddingCosineSimilarity, self).__init__()
+        self.classes = classes
+        self.initializer = initializer
+        self.regularizer = regularizer
+        self.dtype = dtype
+                             
+    def build(self, input_shape):
+        self.channel = input_shape[-1]
+        self.w = self.add_weight(
+            # name='weight', 
+            shape=(self.channel, self.classes), 
+            initializer=self.initializer, 
+            regularizer=self.regularizer,
+            dtype=self.dtype,
+        )
+
+    def call(self, inputs, training=None):
+        # normalize feature
+        x = tf.nn.l2_normalize(tf.cast(inputs, self.dtype), axis=-1)
+        x = x[..., None] * tf.ones((self.channel,), dtype=self.dtype) # (..., E, C)
+        
+        # normalize weights
+        w = tf.nn.l2_normalize(self.w, axis=0)  # (E, C)
+        w = tf.broadcast_to(w, tf.shape(x))     # (..., E, C)
+        x = tf.reduce_sum(x * w, axis=-2) # (..., C)
+
+        return x
+
+    def get_config(self):
+        cfg = super().get_config()
+        return cfg
```

## Comparing `DDesignerAPI-0.0.3.0.dist-info/LICENSE` & `DDesignerAPI-0.0.3.1.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `DDesignerAPI-0.0.3.0.dist-info/METADATA` & `DDesignerAPI-0.0.3.1.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: DDesignerAPI
-Version: 0.0.3.0
+Version: 0.0.3.1
 Summary: Deep-learning Designer: Deep-Learning Training Optimization & Layers API(like Keras)
 Home-page: https://github.com/DPI/TrainingAPI
 Author: Deeper-I
 Author-email: dean@deeper-i.com
 License: Apache-2.0
 Keywords: deeper-i,xwn,tensorflow,keras
 Platform: UNKNOWN
```

## Comparing `DDesignerAPI-0.0.3.0.dist-info/RECORD` & `DDesignerAPI-0.0.3.1.dist-info/RECORD`

 * *Files 3% similar despite different names*

```diff
@@ -8,22 +8,22 @@
 ddesigner_api/pytorch/examples/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 ddesigner_api/pytorch/examples/examples_pytorch.py,sha256=A5tIdMnUDQie4rrE1wJrd0oFfzZgOnq9evjaA0tLTf0,7416
 ddesigner_api/pytorch/xwn/__init__.py,sha256=RS2lQNf9O7p__G_wVfxtvBrw0TSf7YKB_LeTqzKUJ_M,736
 ddesigner_api/pytorch/xwn/torch_nn.py,sha256=Es4CL3qRmMBYMZRJBiwUwGoo49WVRlJiZHhwF3b1GH0,65337
 ddesigner_api/pytorch/xwn/torch_opt.py,sha256=zivpN7V0em7LkhaqZ078ZYTLdZMGt2t5alMohhnX5kY,5223
 ddesigner_api/tensorflow/__init__.py,sha256=q4RdbPLAQVOiRpf5H4WNGeTqWu8GbeW9gav3RFLev18,873
 ddesigner_api/tensorflow/dpi_blocks.py,sha256=e2yRGXgtJXWnf1pf77DndAn6yddn9Rtc_MREeG4rCIk,15071
-ddesigner_api/tensorflow/dpi_layers.py,sha256=WejGaQRaR7Fso7Wb54u77Mj6gJrsmfXoKlQ2Jzy1CjM,10164
+ddesigner_api/tensorflow/dpi_layers.py,sha256=iOA8uuOcvdMwVhyTFVAE1wn-6Vz9KjdfICQSujvxn9M,11447
 ddesigner_api/tensorflow/examples/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 ddesigner_api/tensorflow/examples/examples_keras.py,sha256=3icVGij_UymaEYkOwO4TZNRkWCBjLLSg-Khtlus_Fu8,7883
 ddesigner_api/tensorflow/examples/examples_tensorflow.py,sha256=HIwwuTR6WVR2raIAVY9rexO0Ex0iiby_jZ3l14r3jn8,3021
 ddesigner_api/tensorflow/xwn/__init__.py,sha256=raA9SRLD8OupFBsA2ujBA5xCPTYHS-EO7PYVPIRXL_0,790
 ddesigner_api/tensorflow/xwn/base_conv.py,sha256=wFDQVLEsIiMofU7Dvd1rwc8Gne8Ze3zeF08Zh_WPP2I,16354
 ddesigner_api/tensorflow/xwn/keras_layers.py,sha256=xnlVPFhRuuOYimv6sH-egO_X5T4zCMR6kfNGe77pQ0M,29476
 ddesigner_api/tensorflow/xwn/keras_opt.py,sha256=Ke4PNQSN5DvBTVQVunSxmkhvZoF0-Y6V3huVDrJJlC8,5083
 ddesigner_api/tensorflow/xwn/tf_nn.py,sha256=oaIXhbau-gtFyndce2dF3xWCDOpNhAwCJNLDkR5b5iU,9240
 ddesigner_api/tensorflow/xwn/tf_opt.py,sha256=P45GaEMNKiSIdscX0VYrr02FLx8cbhYeTpMdGDMFOGo,4167
-DDesignerAPI-0.0.3.0.dist-info/LICENSE,sha256=BIg47KsjFz_m25s6T12eL1SAuGkt_KVW_tSqA5yga8g,9136
-DDesignerAPI-0.0.3.0.dist-info/METADATA,sha256=47H9Qs0ahayN8APj4QQUP4NZB7w2LNflRktk15sImpw,7251
-DDesignerAPI-0.0.3.0.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
-DDesignerAPI-0.0.3.0.dist-info/top_level.txt,sha256=qYDp5VPzyYyterLRCKrHqsvRLXTHSMOd-Xiwy2HJ_Ow,14
-DDesignerAPI-0.0.3.0.dist-info/RECORD,,
+DDesignerAPI-0.0.3.1.dist-info/LICENSE,sha256=BIg47KsjFz_m25s6T12eL1SAuGkt_KVW_tSqA5yga8g,9136
+DDesignerAPI-0.0.3.1.dist-info/METADATA,sha256=RIyPQs2x97Gcf_EIU25LJTEAl2-pYrIRfKciNWeuD5w,7251
+DDesignerAPI-0.0.3.1.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
+DDesignerAPI-0.0.3.1.dist-info/top_level.txt,sha256=qYDp5VPzyYyterLRCKrHqsvRLXTHSMOd-Xiwy2HJ_Ow,14
+DDesignerAPI-0.0.3.1.dist-info/RECORD,,
```

