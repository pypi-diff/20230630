# Comparing `tmp/odoo_addon_announcement-15.0.1.0.0.3-py3-none-any.whl.zip` & `tmp/odoo_addon_announcement-15.0.1.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,32 +1,32 @@
-Zip file size: 35759 bytes, number of entries: 30
--rw-r--r--  2.0 unx     5068 b- defN 22-Dec-16 07:59 odoo/addons/announcement/README.rst
--rw-r--r--  2.0 unx       43 b- defN 22-Dec-16 07:59 odoo/addons/announcement/__init__.py
--rw-r--r--  2.0 unx      783 b- defN 22-Dec-16 07:59 odoo/addons/announcement/__manifest__.py
--rw-r--r--  2.0 unx     9898 b- defN 22-Dec-16 07:59 odoo/addons/announcement/i18n/announcement.pot
--rw-r--r--  2.0 unx    11076 b- defN 22-Dec-16 07:59 odoo/addons/announcement/i18n/es.po
--rw-r--r--  2.0 unx       85 b- defN 22-Dec-16 07:59 odoo/addons/announcement/models/__init__.py
--rw-r--r--  2.0 unx     6168 b- defN 22-Dec-16 07:59 odoo/addons/announcement/models/announcement.py
--rw-r--r--  2.0 unx      324 b- defN 22-Dec-16 07:59 odoo/addons/announcement/models/ir_config_parameter.py
--rw-r--r--  2.0 unx     2483 b- defN 22-Dec-16 07:59 odoo/addons/announcement/models/res_users.py
--rw-r--r--  2.0 unx     1537 b- defN 22-Dec-16 07:59 odoo/addons/announcement/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx       81 b- defN 22-Dec-16 07:59 odoo/addons/announcement/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      167 b- defN 22-Dec-16 07:59 odoo/addons/announcement/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      172 b- defN 22-Dec-16 07:59 odoo/addons/announcement/readme/ROADMAP.rst
--rw-r--r--  2.0 unx      542 b- defN 22-Dec-16 07:59 odoo/addons/announcement/readme/USAGE.rst
--rw-r--r--  2.0 unx     2321 b- defN 22-Dec-16 07:59 odoo/addons/announcement/security/announcement_security.xml
--rw-r--r--  2.0 unx      500 b- defN 22-Dec-16 07:59 odoo/addons/announcement/security/ir.model.access.csv
--rw-r--r--  2.0 unx     4887 b- defN 22-Dec-16 07:59 odoo/addons/announcement/static/description/icon.png
--rw-r--r--  2.0 unx    14866 b- defN 22-Dec-16 07:59 odoo/addons/announcement/static/description/index.html
--rw-r--r--  2.0 unx     2154 b- defN 22-Dec-16 07:59 odoo/addons/announcement/static/src/js/announcement_dialog.esm.js
--rw-r--r--  2.0 unx     8397 b- defN 22-Dec-16 07:59 odoo/addons/announcement/static/src/js/announcement_systray.esm.js
--rw-r--r--  2.0 unx     1439 b- defN 22-Dec-16 07:59 odoo/addons/announcement/static/src/xml/announcement_dialog.xml
--rw-r--r--  2.0 unx     1922 b- defN 22-Dec-16 07:59 odoo/addons/announcement/static/src/xml/announcement_systray.xml
--rw-r--r--  2.0 unx     8191 b- defN 22-Dec-16 07:59 odoo/addons/announcement/views/announcement_views.xml
--rw-r--r--  2.0 unx       39 b- defN 22-Dec-16 07:59 odoo/addons/announcement/wizards/__init__.py
--rw-r--r--  2.0 unx      587 b- defN 22-Dec-16 07:59 odoo/addons/announcement/wizards/read_announcement_wizard.py
--rw-r--r--  2.0 unx      492 b- defN 22-Dec-16 07:59 odoo/addons/announcement/wizards/read_announcement_wizard.xml
--rw-r--r--  2.0 unx     5630 b- defN 22-Dec-16 07:59 odoo_addon_announcement-15.0.1.0.0.3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Dec-16 07:59 odoo_addon_announcement-15.0.1.0.0.3.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 22-Dec-16 07:59 odoo_addon_announcement-15.0.1.0.0.3.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3155 b- defN 22-Dec-16 07:59 odoo_addon_announcement-15.0.1.0.0.3.dist-info/RECORD
-30 files, 93104 bytes uncompressed, 30421 bytes compressed:  67.3%
+Zip file size: 35897 bytes, number of entries: 30
+-rw-r--r--  2.0 unx     5068 b- defN 23-Jun-30 17:29 odoo/addons/announcement/README.rst
+-rw-r--r--  2.0 unx       43 b- defN 23-Jun-30 17:29 odoo/addons/announcement/__init__.py
+-rw-r--r--  2.0 unx      783 b- defN 23-Jun-30 17:29 odoo/addons/announcement/__manifest__.py
+-rw-r--r--  2.0 unx    10062 b- defN 23-Jun-30 17:29 odoo/addons/announcement/i18n/announcement.pot
+-rw-r--r--  2.0 unx    11076 b- defN 23-Jun-30 17:29 odoo/addons/announcement/i18n/es.po
+-rw-r--r--  2.0 unx       85 b- defN 23-Jun-30 17:29 odoo/addons/announcement/models/__init__.py
+-rw-r--r--  2.0 unx     6775 b- defN 23-Jun-30 17:29 odoo/addons/announcement/models/announcement.py
+-rw-r--r--  2.0 unx      324 b- defN 23-Jun-30 17:29 odoo/addons/announcement/models/ir_config_parameter.py
+-rw-r--r--  2.0 unx     2483 b- defN 23-Jun-30 17:29 odoo/addons/announcement/models/res_users.py
+-rw-r--r--  2.0 unx     1537 b- defN 23-Jun-30 17:29 odoo/addons/announcement/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx       81 b- defN 23-Jun-30 17:29 odoo/addons/announcement/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      167 b- defN 23-Jun-30 17:29 odoo/addons/announcement/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      172 b- defN 23-Jun-30 17:29 odoo/addons/announcement/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx      542 b- defN 23-Jun-30 17:29 odoo/addons/announcement/readme/USAGE.rst
+-rw-r--r--  2.0 unx     2321 b- defN 23-Jun-30 17:29 odoo/addons/announcement/security/announcement_security.xml
+-rw-r--r--  2.0 unx      500 b- defN 23-Jun-30 17:29 odoo/addons/announcement/security/ir.model.access.csv
+-rw-r--r--  2.0 unx     4887 b- defN 23-Jun-30 17:29 odoo/addons/announcement/static/description/icon.png
+-rw-r--r--  2.0 unx    14866 b- defN 23-Jun-30 17:29 odoo/addons/announcement/static/description/index.html
+-rw-r--r--  2.0 unx     2154 b- defN 23-Jun-30 17:29 odoo/addons/announcement/static/src/js/announcement_dialog.esm.js
+-rw-r--r--  2.0 unx     8397 b- defN 23-Jun-30 17:29 odoo/addons/announcement/static/src/js/announcement_systray.esm.js
+-rw-r--r--  2.0 unx     1439 b- defN 23-Jun-30 17:29 odoo/addons/announcement/static/src/xml/announcement_dialog.xml
+-rw-r--r--  2.0 unx     1922 b- defN 23-Jun-30 17:29 odoo/addons/announcement/static/src/xml/announcement_systray.xml
+-rw-r--r--  2.0 unx     8434 b- defN 23-Jun-30 17:29 odoo/addons/announcement/views/announcement_views.xml
+-rw-r--r--  2.0 unx       39 b- defN 23-Jun-30 17:29 odoo/addons/announcement/wizards/__init__.py
+-rw-r--r--  2.0 unx      587 b- defN 23-Jun-30 17:29 odoo/addons/announcement/wizards/read_announcement_wizard.py
+-rw-r--r--  2.0 unx      492 b- defN 23-Jun-30 17:29 odoo/addons/announcement/wizards/read_announcement_wizard.xml
+-rw-r--r--  2.0 unx     5628 b- defN 23-Jun-30 17:29 odoo_addon_announcement-15.0.1.1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-30 17:29 odoo_addon_announcement-15.0.1.1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-30 17:29 odoo_addon_announcement-15.0.1.1.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3148 b- defN 23-Jun-30 17:29 odoo_addon_announcement-15.0.1.1.0.dist-info/RECORD
+30 files, 94109 bytes uncompressed, 30575 bytes compressed:  67.5%
```

## zipnote {}

```diff
@@ -72,20 +72,20 @@
 
 Filename: odoo/addons/announcement/wizards/read_announcement_wizard.py
 Comment: 
 
 Filename: odoo/addons/announcement/wizards/read_announcement_wizard.xml
 Comment: 
 
-Filename: odoo_addon_announcement-15.0.1.0.0.3.dist-info/METADATA
+Filename: odoo_addon_announcement-15.0.1.1.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_announcement-15.0.1.0.0.3.dist-info/WHEEL
+Filename: odoo_addon_announcement-15.0.1.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_announcement-15.0.1.0.0.3.dist-info/top_level.txt
+Filename: odoo_addon_announcement-15.0.1.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_announcement-15.0.1.0.0.3.dist-info/RECORD
+Filename: odoo_addon_announcement-15.0.1.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/announcement/__manifest__.py

```diff
@@ -1,13 +1,13 @@
 # Copyright 2022 Tecnativa - David Vidal
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 {
     "name": "Announcement",
-    "version": "15.0.1.0.0",
+    "version": "15.0.1.1.0",
     "summary": "Notify internal users about relevant organization stuff",
     "author": "Tecnativa, Odoo Community Association (OCA)",
     "license": "AGPL-3",
     "category": "Server UX",
     "website": "https://github.com/OCA/server-ux",
     "depends": ["mail"],
     "data": [
```

## odoo/addons/announcement/i18n/announcement.pot

```diff
@@ -115,14 +115,19 @@
 #: model:ir.model.fields,field_description:announcement.field_announcement__display_name
 #: model:ir.model.fields,field_description:announcement.field_announcement_log__display_name
 #: model:ir.model.fields,field_description:announcement.field_read_announcement_wizard__display_name
 msgid "Display Name"
 msgstr ""
 
 #. module: announcement
+#: model:ir.model.fields,field_description:announcement.field_announcement__is_general_announcement
+msgid "General Announcement"
+msgstr ""
+
+#. module: announcement
 #: model_terms:ir.ui.view,arch_db:announcement.announcement_management_view_form
 msgid "Groups"
 msgstr ""
 
 #. module: announcement
 #: model:ir.model.fields,field_description:announcement.field_announcement__id
 #: model:ir.model.fields,field_description:announcement.field_announcement_log__id
```

## odoo/addons/announcement/models/announcement.py

```diff
@@ -16,28 +16,34 @@
     _description = "User announcements"
     _order = "notification_date, sequence asc, id"
 
     active = fields.Boolean(copy=False)
     sequence = fields.Integer()
     name = fields.Char(string="Title", required=True)
     content = fields.Html()
+    is_general_announcement = fields.Boolean("General Announcement")
     announcement_type = fields.Selection(
         selection=[
             ("specific_users", "Specific users"),
             ("user_group", "User groups"),
         ],
         default="specific_users",
         required=True,
     )
     specific_user_ids = fields.Many2many(
         comodel_name="res.users",
         domain=[("share", "=", False)],
         inverse="_inverse_specific_user_ids",
     )
-    user_group_ids = fields.Many2many(comodel_name="res.groups")
+    user_group_ids = fields.Many2many(
+        comodel_name="res.groups",
+        compute="_compute_user_group_ids",
+        store=True,
+        readonly=False,
+    )
     allowed_user_ids = fields.Many2many(
         comodel_name="res.users",
         relation="announcement_res_users_allowed_rel",
         compute="_compute_allowed_user_ids",
         compute_sudo=True,
         store=True,
     )
@@ -80,14 +86,24 @@
         for announcement in specific_user_announcements:
             announcement.allowed_user_ids = announcement.specific_user_ids
             announcement.allowed_users_count = len(announcement.specific_user_ids)
         for announcement in self - specific_user_announcements:
             announcement.allowed_user_ids = announcement.user_group_ids.users
             announcement.allowed_users_count = len(announcement.user_group_ids.users)
 
+    @api.depends("is_general_announcement")
+    def _compute_user_group_ids(self):
+        for announcement in self:
+            if announcement.is_general_announcement:
+                announcement.announcement_type = "user_group"
+                announcement.user_group_ids = self.env.ref("base.group_user")
+            else:
+                announcement.specific_user_ids = False
+                announcement.user_group_ids = False
+
     @api.depends("announcement_log_ids")
     def _compute_read_announcement_count(self):
         logs = self.env["announcement.log"].read_group(
             [("announcement_id", "in", self.ids)],
             ["announcement_id"],
             ["announcement_id"],
         )
```

## odoo/addons/announcement/views/announcement_views.xml

### odoo/addons/announcement/views/announcement_views.xml

```diff
@@ -51,14 +51,17 @@
           <widget name="web_ribbon" text="Archived" bg_color="bg-danger" attrs="{'invisible': [('active', '=', True)]}"/>
           <div class="oe_title">
             <h1>
               <field name="name" required="1" placeholder="e.g. Announcement description..."/>
             </h1>
           </div>
           <group>
+            <field name="is_general_announcement"/>
+          </group>
+          <group>
             <field name="active" invisible="1"/>
             <group name="announcement_validity">
               <field name="notification_date" string="Announce at"/>
               <field name="notification_expiry_date" string="Valid up to"/>
             </group>
           </group>
           <notebook>
@@ -88,15 +91,15 @@
               <field name="allowed_users_count"/>
             </span>
             <span class="o_stat_text">Read(s)</span>
           </div>
         </button>
       </xpath>
       <group name="announcement_validity" position="before">
-        <group name="announcement_scope">
+        <group name="announcement_scope" attrs="{'invisible': [('is_general_announcement', '=', True)]}">
           <field name="announcement_type"/>
           <field name="specific_user_ids" string="Users" options="{'no_create': True}" attrs="{'invisible': [('announcement_type', '!=', 'specific_users')], 'required': [('announcement_type', '=', 'specific_users')]}" widget="many2many_tags"/>
           <field name="user_group_ids" string="Groups" options="{'no_create': True}" attrs="{'invisible': [('announcement_type', '!=', 'user_group')], 'required': [('announcement_type', '=', 'user_group')]}" widget="many2many_tags"/>
         </group>
       </group>
     </field>
   </record>
```

## Comparing `odoo_addon_announcement-15.0.1.0.0.3.dist-info/METADATA` & `odoo_addon_announcement-15.0.1.1.0.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo-addon-announcement
-Version: 15.0.1.0.0.3
+Version: 15.0.1.1.0
 Summary: Notify internal users about relevant organization stuff
 Home-page: https://github.com/OCA/server-ux
 Author: Tecnativa, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo_addon_announcement-15.0.1.0.0.3.dist-info/RECORD` & `odoo_addon_announcement-15.0.1.1.0.dist-info/RECORD`

 * *Files 18% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 odoo/addons/announcement/README.rst,sha256=nY8Ld1j-4D1VVaDDM4UNiDME7WJfrMUGzyMCMf7pVg0,5068
 odoo/addons/announcement/__init__.py,sha256=0XNpxETgFdVxFDEw03O8oL3NtTSk3we-HEZW2sPKzIU,43
-odoo/addons/announcement/__manifest__.py,sha256=ju9o_SOgX8PbV749qxWoc1tYEDSEpc7AwqSdFrg_B7s,783
-odoo/addons/announcement/i18n/announcement.pot,sha256=0qIdDnvhvJWSoC_LdSzzYTGP6eA3RdIWX-32j4FMGeo,9898
+odoo/addons/announcement/__manifest__.py,sha256=gmW-mlq_7VsjANpNiQkOBVfa4aCW2qHMYyT5qoRA8e4,783
+odoo/addons/announcement/i18n/announcement.pot,sha256=2PnkkvQXxxDIKYDDAxJIMoNmV5hBWZvQixIG_uRtrh4,10062
 odoo/addons/announcement/i18n/es.po,sha256=WTToghWaesIhrwWmTYDLGbozR_Gy5j4vfvDAySIuKbM,11076
 odoo/addons/announcement/models/__init__.py,sha256=uHuqK13c3lsgwe7LnDyQU8yUOkvuDPPH4vc8b-FA4XM,85
-odoo/addons/announcement/models/announcement.py,sha256=0UZ6VpZC3I0SDF36jLJwR3mf0JBHdH-h_NWd7hWjd1Y,6168
+odoo/addons/announcement/models/announcement.py,sha256=N-LTH268_oypjl2EQtAFqFrFWSaI3oaoGGhzplx525I,6775
 odoo/addons/announcement/models/ir_config_parameter.py,sha256=5a7V6kZACvvPuiCRMxj6Aa8fyDWqJn-W-p2dvKBaPac,324
 odoo/addons/announcement/models/res_users.py,sha256=pHzn9JmuAM_DdJ_VggshV8RjyVwkjNopF89YIdCGNnk,2483
 odoo/addons/announcement/readme/CONFIGURE.rst,sha256=-T7HucJ46FYB8uEi0IKuY0MvfLF8_i17_qKMncjnHKs,1537
 odoo/addons/announcement/readme/CONTRIBUTORS.rst,sha256=BCIxIkAzi5sve-anO--mvyJ4N9qefTo4BeEbDGYgnf4,81
 odoo/addons/announcement/readme/DESCRIPTION.rst,sha256=RBZyo4sqG7ybDoHoiScv8K7gQaP-cl5ab3vCtAR3dlc,167
 odoo/addons/announcement/readme/ROADMAP.rst,sha256=LELmRLVk7vDP3QbM-lXV7f3A2q3ivWpIGV9a_Z78hxg,172
 odoo/addons/announcement/readme/USAGE.rst,sha256=4bJL_2R3CfMqxcfDasqZf53YS6SkAwtsfM5utahS9wQ,542
@@ -16,15 +16,15 @@
 odoo/addons/announcement/security/ir.model.access.csv,sha256=f85GyC_43TM7B-yqAogbS6j8hPGHT62e30MrpPh-k40,500
 odoo/addons/announcement/static/description/icon.png,sha256=XI83orNZq9CmRhTKxgC3u9ZC55CdGJxYNSFsb9TnXhk,4887
 odoo/addons/announcement/static/description/index.html,sha256=LTpal09nDFeM8OsGe6Dx07apIWVmi3QaIIm1HfZsbBM,14866
 odoo/addons/announcement/static/src/js/announcement_dialog.esm.js,sha256=SKnIXA29hTtRVmIhtWEHwQbLPQmCfMBcfb0WW8DhGJ0,2154
 odoo/addons/announcement/static/src/js/announcement_systray.esm.js,sha256=VjwJVz_azaITw66ft9Frj8ihRNPO0xveY6v9ZeNu_-U,8397
 odoo/addons/announcement/static/src/xml/announcement_dialog.xml,sha256=A7jUQx1ZwD9V398HcsngtXsvUSiBudNOsTGJ4n87OJU,1439
 odoo/addons/announcement/static/src/xml/announcement_systray.xml,sha256=BuvP_VpuBkvHo5vISfxCyzPiqkgaNX37cd7VDTqv3Sg,1922
-odoo/addons/announcement/views/announcement_views.xml,sha256=KjQ9iFXSW9suHNOz8ut602npEYjEaJj4ISlsdUyETzM,8191
+odoo/addons/announcement/views/announcement_views.xml,sha256=PgPe1W8K-BeKzOZjSI_H9JwXquReNRVeLQTFAvXrdaw,8434
 odoo/addons/announcement/wizards/__init__.py,sha256=eyr7chSKkuSPKs0f5aczdWXl3g-_sCootPnms_KbwGA,39
 odoo/addons/announcement/wizards/read_announcement_wizard.py,sha256=XkT9i1_asGGUmwZ5B4GuXkFZM2TbtSIqeBkFvRkHo58,587
 odoo/addons/announcement/wizards/read_announcement_wizard.xml,sha256=uggjMtsGyi6RNVr6Hm4IJ6SO4X3_7fenpsTL-rXyOQo,492
-odoo_addon_announcement-15.0.1.0.0.3.dist-info/METADATA,sha256=r5Dod8Iaio3tU4FDkwSxeh8_jgQzjx27ijezEDaQAFY,5630
-odoo_addon_announcement-15.0.1.0.0.3.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-odoo_addon_announcement-15.0.1.0.0.3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_announcement-15.0.1.0.0.3.dist-info/RECORD,,
+odoo_addon_announcement-15.0.1.1.0.dist-info/METADATA,sha256=zEZAe49fNFupozuYb2_lP4hXMj8RwLeHFewPIChNX1w,5628
+odoo_addon_announcement-15.0.1.1.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo_addon_announcement-15.0.1.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_announcement-15.0.1.1.0.dist-info/RECORD,,
```

