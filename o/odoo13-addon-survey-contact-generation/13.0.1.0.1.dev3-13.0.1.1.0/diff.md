# Comparing `tmp/odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3-py3-none-any.whl.zip` & `tmp/odoo13_addon_survey_contact_generation-13.0.1.1.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,28 +1,28 @@
-Zip file size: 28542 bytes, number of entries: 26
--rw-r--r--  2.0 unx     3581 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/README.rst
--rw-r--r--  2.0 unx       21 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/__init__.py
--rw-r--r--  2.0 unx      691 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/__manifest__.py
--rw-r--r--  2.0 unx     2312 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/demo/survey_contact_generation_demo.xml
--rw-r--r--  2.0 unx     5045 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/i18n/es.po
--rw-r--r--  2.0 unx     4553 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/i18n/survey_contact_generation.pot
--rw-r--r--  2.0 unx       90 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/models/__init__.py
--rw-r--r--  2.0 unx     1186 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/models/survey_question.py
--rw-r--r--  2.0 unx      312 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/models/survey_survey.py
--rw-r--r--  2.0 unx     1600 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/models/survey_user_input.py
--rw-r--r--  2.0 unx      444 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      100 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       66 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      134 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/readme/USAGE.rst
--rw-r--r--  2.0 unx     8322 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/static/description/icon.png
--rw-r--r--  2.0 unx    13093 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/static/description/index.html
--rw-r--r--  2.0 unx     1609 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/static/tests/survey_contact_generation_tour.js
--rw-r--r--  2.0 unx       45 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/tests/__init__.py
--rw-r--r--  2.0 unx     1477 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/tests/test_survey_contact_generation.py
--rw-r--r--  2.0 unx      425 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/views/assets.xml
--rw-r--r--  2.0 unx      631 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/views/survey_question_views.xml
--rw-r--r--  2.0 unx      502 b- defN 23-Jun-15 11:34 odoo/addons/survey_contact_generation/views/survey_survey_views.xml
--rw-r--r--  2.0 unx     4180 b- defN 23-Jun-15 11:34 odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jun-15 11:34 odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Jun-15 11:34 odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3063 b- defN 23-Jun-15 11:34 odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/RECORD
-26 files, 53579 bytes uncompressed, 23234 bytes compressed:  56.6%
+Zip file size: 29945 bytes, number of entries: 26
+-rw-r--r--  2.0 unx     3581 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/__init__.py
+-rw-r--r--  2.0 unx      691 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/__manifest__.py
+-rw-r--r--  2.0 unx     4661 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/demo/survey_contact_generation_demo.xml
+-rw-r--r--  2.0 unx     5045 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/i18n/es.po
+-rw-r--r--  2.0 unx     6654 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/i18n/survey_contact_generation.pot
+-rw-r--r--  2.0 unx       90 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/models/__init__.py
+-rw-r--r--  2.0 unx     2896 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/models/survey_question.py
+-rw-r--r--  2.0 unx      312 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/models/survey_survey.py
+-rw-r--r--  2.0 unx     3309 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/models/survey_user_input.py
+-rw-r--r--  2.0 unx      444 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      100 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       66 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      134 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/readme/USAGE.rst
+-rw-r--r--  2.0 unx     8322 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/static/description/icon.png
+-rw-r--r--  2.0 unx    13093 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/static/description/index.html
+-rw-r--r--  2.0 unx     2946 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/static/tests/survey_contact_generation_tour.js
+-rw-r--r--  2.0 unx       45 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/tests/__init__.py
+-rw-r--r--  2.0 unx     1258 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/tests/test_survey_contact_generation.py
+-rw-r--r--  2.0 unx      425 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/views/assets.xml
+-rw-r--r--  2.0 unx     1462 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/views/survey_question_views.xml
+-rw-r--r--  2.0 unx      502 b- defN 23-Jun-30 09:50 odoo/addons/survey_contact_generation/views/survey_survey_views.xml
+-rw-r--r--  2.0 unx     4175 b- defN 23-Jun-30 09:50 odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-30 09:50 odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-30 09:50 odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3044 b- defN 23-Jun-30 09:50 odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/RECORD
+26 files, 63373 bytes uncompressed, 24677 bytes compressed:  61.1%
```

## zipnote {}

```diff
@@ -60,20 +60,20 @@
 
 Filename: odoo/addons/survey_contact_generation/views/survey_question_views.xml
 Comment: 
 
 Filename: odoo/addons/survey_contact_generation/views/survey_survey_views.xml
 Comment: 
 
-Filename: odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/METADATA
+Filename: odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/WHEEL
+Filename: odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/top_level.txt
+Filename: odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/RECORD
+Filename: odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/survey_contact_generation/__manifest__.py

```diff
@@ -1,13 +1,13 @@
 # Copyright 2023 Tecnativa - David Vidal
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 {
     "name": "Survey contacts generation",
     "summary": "Generate new contacts from surveys",
-    "version": "13.0.1.0.0",
+    "version": "13.0.1.1.0",
     "development_status": "Beta",
     "category": "Marketing/Survey",
     "website": "https://github.com/OCA/survey",
     "author": "Tecnativa, Odoo Community Association (OCA)",
     "maintainers": ["chienandalu"],
     "license": "AGPL-3",
     "depends": ["survey"],
```

## odoo/addons/survey_contact_generation/demo/survey_contact_generation_demo.xml

### odoo/addons/survey_contact_generation/demo/survey_contact_generation_demo.xml

```diff
@@ -41,8 +41,52 @@
   <record model="survey.question" id="survey_contact_q4">
     <field name="survey_id" ref="survey_contact_creation"/>
     <field name="sequence">4</field>
     <field name="title">Date</field>
     <field name="question_type">date</field>
     <field name="res_partner_field" ref="base.field_res_partner__date"/>
   </record>
+  <record model="survey.question" id="survey_contact_q5">
+    <field name="survey_id" ref="survey_contact_creation"/>
+    <field name="sequence">4</field>
+    <field name="title">Country</field>
+    <field name="question_type">simple_choice</field>
+    <field name="res_partner_field" ref="base.field_res_partner__country_id"/>
+  </record>
+  <record model="survey.label" id="survey_contact_q5_sug1">
+    <field name="question_id" ref="survey_contact_q5"/>
+    <field name="sequence">1</field>
+    <field name="value">Spain</field>
+    <field name="res_partner_field_resource_ref" ref="base.es"/>
+  </record>
+  <record model="survey.label" id="survey_contact_q5_sug2">
+    <field name="question_id" ref="survey_contact_q5"/>
+    <field name="sequence">2</field>
+    <field name="value">Romania</field>
+    <field name="res_partner_field_resource_ref" ref="base.ro"/>
+  </record>
+  <record model="survey.question" id="survey_contact_q6">
+    <field name="survey_id" ref="survey_contact_creation"/>
+    <field name="sequence">4</field>
+    <field name="title">Tags</field>
+    <field name="question_type">multiple_choice</field>
+    <field name="res_partner_field" ref="base.field_res_partner__category_id"/>
+  </record>
+  <record model="survey.label" id="survey_contact_q6_sug1">
+    <field name="question_id" ref="survey_contact_q6"/>
+    <field name="sequence">1</field>
+    <field name="value">Vendor</field>
+    <field name="res_partner_field_resource_ref" ref="base.res_partner_category_0"/>
+  </record>
+  <record model="survey.label" id="survey_contact_q6_sug2">
+    <field name="question_id" ref="survey_contact_q6"/>
+    <field name="sequence">2</field>
+    <field name="value">Prospects</field>
+    <field name="res_partner_field_resource_ref" ref="base.res_partner_category_2"/>
+  </record>
+  <record model="survey.label" id="survey_contact_q6_sug3">
+    <field name="question_id" ref="survey_contact_q6"/>
+    <field name="sequence">3</field>
+    <field name="value">Employees</field>
+    <field name="res_partner_field_resource_ref" ref="base.res_partner_category_3"/>
+  </record>
 </odoo>
```

## odoo/addons/survey_contact_generation/i18n/survey_contact_generation.pot

```diff
@@ -32,31 +32,48 @@
 
 #. module: survey_contact_generation
 #: model:survey.survey,title:survey_contact_generation.survey_contact_creation
 msgid "Contact Creation Survey"
 msgstr ""
 
 #. module: survey_contact_generation
+#: model:ir.model.fields,field_description:survey_contact_generation.field_survey_label__res_partner_field
 #: model:ir.model.fields,field_description:survey_contact_generation.field_survey_question__res_partner_field
 msgid "Contact field"
 msgstr ""
 
 #. module: survey_contact_generation
+#: model:ir.model.fields,field_description:survey_contact_generation.field_survey_label__res_partner_field_resource_ref
+msgid "Contact field value"
+msgstr ""
+
+#. module: survey_contact_generation
+#: model:survey.question,question:survey_contact_generation.survey_contact_q5
+#: model:survey.question,title:survey_contact_generation.survey_contact_q5
+msgid "Country"
+msgstr ""
+
+#. module: survey_contact_generation
 #: model:survey.question,question:survey_contact_generation.survey_contact_q4
 #: model:survey.question,title:survey_contact_generation.survey_contact_q4
 msgid "Date"
 msgstr ""
 
 #. module: survey_contact_generation
 #: model:survey.question,question:survey_contact_generation.survey_contact_q1
 #: model:survey.question,title:survey_contact_generation.survey_contact_q1
 msgid "Email"
 msgstr ""
 
 #. module: survey_contact_generation
+#: model:survey.label,value:survey_contact_generation.survey_contact_q6_sug3
+msgid "Employees"
+msgstr ""
+
+#. module: survey_contact_generation
 #: model:ir.model.fields,field_description:survey_contact_generation.field_survey_survey__generate_contact
 msgid "Generate Contact"
 msgstr ""
 
 #. module: survey_contact_generation
 #: model:ir.model.fields,help:survey_contact_generation.field_survey_survey__generate_contact
 msgid "Generate contacts for anonymous survey users"
@@ -64,14 +81,16 @@
 
 #. module: survey_contact_generation
 #: model:survey.question,comments_message:survey_contact_generation.survey_contact_q0
 #: model:survey.question,comments_message:survey_contact_generation.survey_contact_q1
 #: model:survey.question,comments_message:survey_contact_generation.survey_contact_q2
 #: model:survey.question,comments_message:survey_contact_generation.survey_contact_q3
 #: model:survey.question,comments_message:survey_contact_generation.survey_contact_q4
+#: model:survey.question,comments_message:survey_contact_generation.survey_contact_q5
+#: model:survey.question,comments_message:survey_contact_generation.survey_contact_q6
 msgid "If other, please specify:"
 msgstr ""
 
 #. module: survey_contact_generation
 #: model:survey.question,question:survey_contact_generation.survey_contact_q0
 #: model:survey.question,title:survey_contact_generation.survey_contact_q0
 msgid "Name"
@@ -80,38 +99,73 @@
 #. module: survey_contact_generation
 #: model:survey.question,question:survey_contact_generation.survey_contact_q2
 #: model:survey.question,title:survey_contact_generation.survey_contact_q2
 msgid "Notes"
 msgstr ""
 
 #. module: survey_contact_generation
+#: model:survey.label,value:survey_contact_generation.survey_contact_q6_sug2
+msgid "Prospects"
+msgstr ""
+
+#. module: survey_contact_generation
+#: model:survey.label,value:survey_contact_generation.survey_contact_q5_sug2
+msgid "Romania"
+msgstr ""
+
+#. module: survey_contact_generation
+#: model:survey.label,value:survey_contact_generation.survey_contact_q5_sug1
+msgid "Spain"
+msgstr ""
+
+#. module: survey_contact_generation
 #: model:ir.model,name:survey_contact_generation.model_survey_survey
 msgid "Survey"
 msgstr ""
 
 #. module: survey_contact_generation
+#: model:ir.model,name:survey_contact_generation.model_survey_label
+msgid "Survey Label"
+msgstr ""
+
+#. module: survey_contact_generation
 #: model:ir.model,name:survey_contact_generation.model_survey_question
 msgid "Survey Question"
 msgstr ""
 
 #. module: survey_contact_generation
 #: model:ir.model,name:survey_contact_generation.model_survey_user_input
 msgid "Survey User Input"
 msgstr ""
 
 #. module: survey_contact_generation
+#: model:survey.question,question:survey_contact_generation.survey_contact_q6
+#: model:survey.question,title:survey_contact_generation.survey_contact_q6
+msgid "Tags"
+msgstr ""
+
+#. module: survey_contact_generation
 #: model:survey.question,validation_error_msg:survey_contact_generation.survey_contact_q0
 #: model:survey.question,validation_error_msg:survey_contact_generation.survey_contact_q1
 #: model:survey.question,validation_error_msg:survey_contact_generation.survey_contact_q2
 #: model:survey.question,validation_error_msg:survey_contact_generation.survey_contact_q3
 #: model:survey.question,validation_error_msg:survey_contact_generation.survey_contact_q4
+#: model:survey.question,validation_error_msg:survey_contact_generation.survey_contact_q5
+#: model:survey.question,validation_error_msg:survey_contact_generation.survey_contact_q6
 msgid "The answer you entered is not valid."
 msgstr ""
 
 #. module: survey_contact_generation
 #: model:survey.question,constr_error_msg:survey_contact_generation.survey_contact_q0
 #: model:survey.question,constr_error_msg:survey_contact_generation.survey_contact_q1
 #: model:survey.question,constr_error_msg:survey_contact_generation.survey_contact_q2
 #: model:survey.question,constr_error_msg:survey_contact_generation.survey_contact_q3
 #: model:survey.question,constr_error_msg:survey_contact_generation.survey_contact_q4
+#: model:survey.question,constr_error_msg:survey_contact_generation.survey_contact_q5
+#: model:survey.question,constr_error_msg:survey_contact_generation.survey_contact_q6
 msgid "This question requires an answer."
 msgstr ""
+
+#. module: survey_contact_generation
+#: model:survey.label,value:survey_contact_generation.survey_contact_q6_sug1
+msgid "Vendor"
+msgstr ""
```

## odoo/addons/survey_contact_generation/models/survey_question.py

```diff
@@ -14,24 +14,66 @@
         comodel_name="ir.model.fields",
         domain="[('id', 'in', allowed_field_ids)]",
     )
 
     @api.depends("question_type")
     def _compute_allowed_field_ids(self):
         type_mapping = {
-            "textbox": ["char"],
+            "textbox": ["char", "text"],
             "free_text": ["text"],
-            "numerical_box": ["integer", "float"],
-            "date": ["date"],
-            "datetime": ["datetime"],
+            "numerical_box": ["integer", "float", "text", "char"],
+            "date": ["date", "text", "char"],
+            "datetime": ["datetime", "text", "char"],
+            "simple_choice": ["many2one", "text", "char"],
+            "multiple_choice": ["many2many", "text", "char"],
         }
         for record in self:
             record.allowed_field_ids = (
                 self.env["ir.model.fields"]
                 .search(
                     [
                         ("model", "=", "res.partner"),
                         ("ttype", "in", type_mapping.get(record.question_type, [])),
                     ]
                 )
                 .ids
             )
+
+
+class SurveyLabel(models.Model):
+    _inherit = "survey.label"
+
+    @api.model
+    def default_get(self, fields):
+        result = super().default_get(fields)
+        if (
+            not result.get("res_partner_field")
+            or "res_partner_field_resource_ref" not in fields
+        ):
+            return result
+        partner_field = self.env["ir.model.fields"].browse(result["res_partner_field"])
+        # Otherwise we'll just use the value (char, text)
+        if partner_field.ttype not in {"many2one", "many2many"}:
+            return result
+        res = self.env[partner_field.relation].search([], limit=1)
+        if res:
+            result["res_partner_field_resource_ref"] = "%s,%s" % (
+                partner_field.relation,
+                res.id,
+            )
+        return result
+
+    @api.model
+    def _selection_res_partner_field_resource_ref(self):
+        return [(model.model, model.name) for model in self.env["ir.model"].search([])]
+
+    res_partner_field = fields.Many2one(related="question_id.res_partner_field")
+    res_partner_field_resource_ref = fields.Reference(
+        string="Contact field value",
+        selection="_selection_res_partner_field_resource_ref",
+    )
+
+    @api.onchange("res_partner_field_resource_ref")
+    def _onchange_res_partner_field_resource_ref(self):
+        """Set the default value as the product name, although we can change it"""
+        if self.res_partner_field_resource_ref:
+            self.value = self.res_partner_field_resource_ref.display_name or ""
```

## odoo/addons/survey_contact_generation/models/survey_user_input.py

```diff
@@ -3,27 +3,62 @@
 from odoo import models
 
 
 class SurveyUserInput(models.Model):
     _inherit = "survey.user_input"
 
     def _prepare_partner(self):
+        """Extract partner values from the answers"""
         self.ensure_one()
-        return {
+        elegible_inputs = self.user_input_line_ids.filtered(
+            lambda x: x.question_id.res_partner_field and not x.skipped
+        )
+        basic_inputs = elegible_inputs.filtered(
+            lambda x: x.answer_type not in {"suggestion"}
+            and x.question_id.res_partner_field.name != "comment"
+        )
+        vals = {
             line.question_id.res_partner_field.name: line[f"value_{line.answer_type}"]
-            for line in self.user_input_line_ids.filtered(
-                lambda r: r.question_id.res_partner_field
-            )
+            for line in basic_inputs
         }
+        for line in elegible_inputs - basic_inputs:
+            field_name = line.question_id.res_partner_field.name
+            if line.question_id.res_partner_field.ttype == "many2one":
+                vals[
+                    field_name
+                ] = line.value_suggested.res_partner_field_resource_ref.id
+            elif line.question_id.res_partner_field.ttype == "many2many":
+                vals.setdefault(field_name, [])
+                vals[field_name] += [
+                    (4, line.value_suggested.res_partner_field_resource_ref.id)
+                ]
+            # We'll use the comment field to add any other infos
+            elif field_name == "comment":
+                vals.setdefault("comment", "")
+                value = (
+                    line.value_suggested.value
+                    if line.answer_type == "suggestion"
+                    else line[f"value_{line.answer_type}"]
+                )
+                vals["comment"] += f"\n{line.question_id.title}: {value}"
+            else:
+                if line.question_id.question_type == "multiple_choice":
+                    if not vals.get(field_name):
+                        vals[field_name] = line.value_suggested.value
+                    else:
+                        vals[field_name] += line.value_suggested.value
+                else:
+                    vals[field_name] = line.value_suggested.value
+        return vals
 
-    def _create_contact_post_process(self):
+    def _create_contact_post_process(self, partner):
         """After creating the lead send an internal message with the input link"""
-        self.partner_id.message_post_with_view(
+        partner.message_post_with_view(
             "mail.message_origin_link",
-            values={"self": self.partner_id, "origin": self.survey_id},
+            values={"self": partner, "origin": self.survey_id},
             subtype_id=self.env.ref("mail.mt_note").id,
         )
 
     def _mark_done(self):
         """Generate the contact when the survey is submitted"""
         for user_input in self.filtered(
             lambda r: r.survey_id.generate_contact and not self.partner_id
@@ -33,10 +68,10 @@
             email = vals.get("email")
             if email:
                 partner = self.env["res.partner"].search(
                     [("email", "=", email)], limit=1
                 )
             if not partner:
                 partner = self.env["res.partner"].create(vals)
-                self._create_contact_post_process()
-            self.write({"partner_id": partner.id, "email": partner.email})
+                self._create_contact_post_process(partner)
+            self.update({"partner_id": partner.id, "email": partner.email})
         return super()._mark_done()
```

## odoo/addons/survey_contact_generation/static/tests/survey_contact_generation_tour.js

### js-beautify {}

```diff
@@ -14,28 +14,52 @@
         }, {
             content: "Name",
             trigger: "div.js_question-wrapper:contains('Name') input",
             run: "text My Name",
         }, {
             content: "Email",
             trigger: "div.js_question-wrapper:contains('Email') input",
-            run: "text test@test.com",
+            run: "text survey_contact_generation@test.com",
         }, {
             content: "Notes",
             trigger: "div.js_question-wrapper:contains('Notes') textarea",
             run: "text This is a test note",
         }, {
             content: "Color",
             trigger: "div.js_question-wrapper:contains('Color') input",
             run: "text 1",
         }, {
             content: "Date",
             trigger: "div.js_question-wrapper:contains('Date') input",
             run: "text 01/01/2023",
         }, {
+            content: "Country",
+            trigger: "div.js_question-wrapper:contains('Country') label:contains('Romania') input[type='radio']",
+            run: function() {
+                $(
+                    "div.js_question-wrapper:contains('Country') label:contains('Romania') input[type='radio']"
+                ).prop("checked", true);
+            },
+        }, {
+            content: "Tags",
+            trigger: "div.js_question-wrapper:contains('Tags') label:contains('Prospects') input[type='checkbox']",
+            run: function() {
+                $(
+                    "div.js_question-wrapper:contains('Tags') label:contains('Prospects') input[type='checkbox']"
+                ).prop("checked", true);
+            },
+        }, {
+            content: "Tags",
+            trigger: "div.js_question-wrapper:contains('Tags') label:contains('Vendor') input[type='checkbox']",
+            run: function() {
+                $(
+                    "div.js_question-wrapper:contains('Tags') label:contains('Vendor') input[type='checkbox']"
+                ).prop("checked", true);
+            },
+        }, {
             content: "Click Submit",
             trigger: "button[value='finish']",
         }, {
             content: "Thank you",
             trigger: "h1:contains('Thank you!')",
         }, ]
     );
```

## odoo/addons/survey_contact_generation/tests/test_survey_contact_generation.py

```diff
@@ -14,25 +14,18 @@
         super().setUp()
         self.survey = self.env.ref("survey_contact_generation.survey_contact_creation")
         initial_user_inputs = self.survey.user_input_ids
         # Run the survey as a portal user and get the generated quotation
         self.start_tour(
             f"/survey/start/{self.survey.access_token}",
             "test_survey_contact_generation",
-            # login="public",
         )
         self.user_input = self.survey.user_input_ids - initial_user_inputs
 
 
 @tagged("-at_install", "post_install")
 class SurveyContactGenerationTests(SurveyContactGenerationCase):
     def test_contact_generation(self):
         partner = self.env["res.partner"].search(
-            [
-                ("name", "=", "My Name"),
-                ("email", "=", "test@test.com"),
-                ("comment", "=", "This is a test note"),
-                ("color", "=", 1),
-                ("date", "=", "01/01/2023"),
-            ]
+            [("email", "=", "survey_contact_generation@test.com")]
         )
         self.assertEqual(partner, self.user_input.partner_id)
```

## odoo/addons/survey_contact_generation/views/survey_question_views.xml

### odoo/addons/survey_contact_generation/views/survey_question_views.xml

```diff
@@ -6,10 +6,17 @@
     <field name="arch" type="xml">
       <xpath expr="//field[@name='comments_allowed']/.." position="after">
         <group name="contact" string="Contact">
           <field name="res_partner_field" widget="selection"/>
           <field name="allowed_field_ids" invisible="1"/>
         </group>
       </xpath>
+      <xpath expr="//field[@name='labels_ids']" position="attributes">
+        <attribute name="context">{'default_question_id': active_id, 'default_res_partner_field': res_partner_field}</attribute>
+      </xpath>
+      <xpath expr="//field[@name='labels_ids']//field[@name='value']" position="after">
+        <field name="res_partner_field" invisible="1"/>
+        <field name="res_partner_field_resource_ref" readonly="False" options="{'hide_model': True, 'no_create': True, 'no_edit': True, 'no_open': True}" attrs="{'column_invisible': [('parent.res_partner_field', '=', False)]}"/>
+      </xpath>
     </field>
   </record>
 </odoo>
```

## Comparing `odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/METADATA` & `odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/METADATA`

 * *Files 3% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo13-addon-survey-contact-generation
-Version: 13.0.1.0.1.dev3
+Version: 13.0.1.1.0
 Summary: Generate new contacts from surveys
 Home-page: https://github.com/OCA/survey
 Author: Tecnativa, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/RECORD` & `odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/RECORD`

 * *Files 9% similar despite different names*

```diff
@@ -1,26 +1,26 @@
 odoo/addons/survey_contact_generation/README.rst,sha256=axwtvJsNyM95sXongPmpzH_tShRHxuBUCozxoZekTqM,3581
 odoo/addons/survey_contact_generation/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/survey_contact_generation/__manifest__.py,sha256=5cbfoAAnaI7FOUqvTu5-Vid8dcnTE9mWhSbVasc7dYs,691
-odoo/addons/survey_contact_generation/demo/survey_contact_generation_demo.xml,sha256=k4HmGSQMeJfVoC9xmcFNxeCBr6YAkcHWppilrzCniPM,2312
+odoo/addons/survey_contact_generation/__manifest__.py,sha256=lGsp5X-AZiIq9eeqhcS7cFXXqUwoqoQaprb9EtxGWOA,691
+odoo/addons/survey_contact_generation/demo/survey_contact_generation_demo.xml,sha256=Y-0jCNWZ6AWwI7Fw31RmiwHGk2pNKazp6GposMawLIk,4661
 odoo/addons/survey_contact_generation/i18n/es.po,sha256=b4OoqF5gDTqz5MXhgAwD_PuU-yZYIwf_5lhyfjJB_Cc,5045
-odoo/addons/survey_contact_generation/i18n/survey_contact_generation.pot,sha256=ukUicT7RCenbH3RlVXb3eEiVI67A8M-GpOJ6DyKdUOc,4553
+odoo/addons/survey_contact_generation/i18n/survey_contact_generation.pot,sha256=BBf-FvG5t2vyXVcO50Q1HZW-S4FHbkzj6CRlbE853BI,6654
 odoo/addons/survey_contact_generation/models/__init__.py,sha256=oBEgmPQA4VxWswYzzY_v2J57tpgUHCbp7T6VxR8DIJs,90
-odoo/addons/survey_contact_generation/models/survey_question.py,sha256=esiy1E3_N1X0czl_Riw6Pev0gPRqhwYsz97kjsE7tN0,1186
+odoo/addons/survey_contact_generation/models/survey_question.py,sha256=TEUNRQoEKKfP0q2e8I3ir-akd2TNta524vT0mQhmlu0,2896
 odoo/addons/survey_contact_generation/models/survey_survey.py,sha256=J6D6hvmF51OwrNQAAEdydykPKPl0U6F7DQRrYTnuckk,312
-odoo/addons/survey_contact_generation/models/survey_user_input.py,sha256=KCqhfeV8JAZqGPI9LqaBjyjXvsVUQ-YBjaGX-wL9EqA,1600
+odoo/addons/survey_contact_generation/models/survey_user_input.py,sha256=ix7Wl99qQ4Zjc3IFTYACNUiDbVJ62bBY6T0any7DOGQ,3309
 odoo/addons/survey_contact_generation/readme/CONFIGURE.rst,sha256=3cfiM5n6Ompgkpg4Dn-2T3RlA0nnP2AjwLClPUVxDL8,444
 odoo/addons/survey_contact_generation/readme/CONTRIBUTORS.rst,sha256=bL1QAayaLGD28oM5Jzh4tRcdF78FvurvxcfAvLyZilM,100
 odoo/addons/survey_contact_generation/readme/DESCRIPTION.rst,sha256=JM-FBTOLnK_pIPlDA3dtIwVHikx45q5z2F2cLMta0XM,66
 odoo/addons/survey_contact_generation/readme/USAGE.rst,sha256=vQrVrzrXq39Y1Wy34E5ubotfG7ORx_LV89drk0xI-Gs,134
 odoo/addons/survey_contact_generation/static/description/icon.png,sha256=UxEyesADkUN6FjUlv_b2jJ20KQMvEyWJdgTzzLFmVHI,8322
 odoo/addons/survey_contact_generation/static/description/index.html,sha256=4NuYjIySICMfyAwpo_JrBXJCJ1jD4T8ZZopC5fZPYJk,13093
-odoo/addons/survey_contact_generation/static/tests/survey_contact_generation_tour.js,sha256=B0vfgnuZEZAWwLA85VDsoWoynYBffb0INng9Md8rMjM,1609
+odoo/addons/survey_contact_generation/static/tests/survey_contact_generation_tour.js,sha256=N_Gnt_vfCO2HGpwYcAc9XQTdj_zrZys5LbbyjAnDzjQ,2946
 odoo/addons/survey_contact_generation/tests/__init__.py,sha256=ZfwpKnhS2r5GOhEQJLZ-oFYbFsZ2Bu4AL1d3sWjl0v0,45
-odoo/addons/survey_contact_generation/tests/test_survey_contact_generation.py,sha256=lBDwWw-WHipOax-96R6Y3l2NyLiRpR0FHqskGn3qU6s,1477
+odoo/addons/survey_contact_generation/tests/test_survey_contact_generation.py,sha256=CRcI367YLDq23sVPwvul-_SdCScrrq5b72C_k0ZVxcs,1258
 odoo/addons/survey_contact_generation/views/assets.xml,sha256=bWmonHoMjqbGxOB8vQBeg818suJhWTqQokO09pgnDyc,425
-odoo/addons/survey_contact_generation/views/survey_question_views.xml,sha256=dFJ7Sducr3rjSLAtAbzx6bMvdLg_IloY1LfdO0UF0Js,631
+odoo/addons/survey_contact_generation/views/survey_question_views.xml,sha256=3c1qiPIGZjftrWYh8RvOQOG5AEbAAF3-SQefp4YNBLQ,1462
 odoo/addons/survey_contact_generation/views/survey_survey_views.xml,sha256=EEqrwJ7uED1PLYgc_GkNyQZ7_YOUdkfqBGlHzL71GO4,502
-odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/METADATA,sha256=VXiqRhuj4bIm5sQYa_U4SPkZkHu1ZpZiBiiLjMjixGI,4180
-odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/WHEEL,sha256=2wepM1nk4DS4eFpYrW1TTqPcoGNfHhhO_i5m4cOimbo,92
-odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo13_addon_survey_contact_generation-13.0.1.0.1.dev3.dist-info/RECORD,,
+odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/METADATA,sha256=9yIrsFBs5Ggd-0gM1IxXs8sgaO1vP_4ajZqgNeuTdPE,4175
+odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo13_addon_survey_contact_generation-13.0.1.1.0.dist-info/RECORD,,
```

