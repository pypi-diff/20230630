# Comparing `tmp/odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0-py3-none-any.whl.zip` & `tmp/odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,51 +1,51 @@
-Zip file size: 56286 bytes, number of entries: 49
--rw-r--r--  2.0 unx     5159 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/README.rst
--rw-r--r--  2.0 unx       21 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/__init__.py
--rw-r--r--  2.0 unx     1367 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/__manifest__.py
--rw-r--r--  2.0 unx      386 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/demo/pos_config_demo.xml
--rw-r--r--  2.0 unx     2614 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/demo/pos_payment_method_demo.xml
--rw-r--r--  2.0 unx    17424 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/i18n/l10n_br_pos_cfe.pot
--rw-r--r--  2.0 unx    17496 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/i18n/pt_BR.po
--rw-r--r--  2.0 unx      206 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/models/__init__.py
--rw-r--r--  2.0 unx     1577 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/models/pos_config.py
--rw-r--r--  2.0 unx     1039 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/models/pos_order.py
--rw-r--r--  2.0 unx     3165 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/models/pos_payment_method.py
--rw-r--r--  2.0 unx      218 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      334 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       95 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/readme/CREDITS.rst
--rw-r--r--  2.0 unx       99 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      506 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/readme/HISTORY.rst
--rw-r--r--  2.0 unx      310 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/readme/INSTALL.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/description/icon.png
--rw-r--r--  2.0 unx    16325 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/description/index.html
--rw-r--r--  2.0 unx     3075 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/css/pos.css
--rw-r--r--  2.0 unx     2437 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/devices.js
--rw-r--r--  2.0 unx     9855 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/fiscal_cfe.js
--rw-r--r--  2.0 unx     9581 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/models.js
--rw-r--r--  2.0 unx     1454 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/ChromeWidgets/ProxyStatus.js
--rw-r--r--  2.0 unx      948 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/OrderManagementScreen/ReprintReceiptScreen.js
--rw-r--r--  2.0 unx     1318 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/PaymentScreen/PaymentScreen.js
--rw-r--r--  2.0 unx     4715 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderFooterReceipt.js
--rw-r--r--  2.0 unx     1246 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderHeaderReceipt.js
--rw-r--r--  2.0 unx      875 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderPaymentReceipt.js
--rw-r--r--  2.0 unx     1414 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderRowReceipt.js
--rw-r--r--  2.0 unx      890 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderSubtitleReceipt.js
--rw-r--r--  2.0 unx     1306 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderTotalsReceipt.js
--rw-r--r--  2.0 unx     1192 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/ReceiptScreen.js
--rw-r--r--  2.0 unx     1063 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/SatOrderReceipt.js
--rw-r--r--  2.0 unx     1998 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderFooterReceipt.xml
--rw-r--r--  2.0 unx     1102 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderHeaderReceipt.xml
--rw-r--r--  2.0 unx      440 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderPaymentReceipt.xml
--rw-r--r--  2.0 unx     1272 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderRowReceipt.xml
--rw-r--r--  2.0 unx     1235 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderSubtitleReceipt.xml
--rw-r--r--  2.0 unx     1000 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderTotalsReceipt.xml
--rw-r--r--  2.0 unx     3681 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/SatOrderReceipt.xml
--rw-r--r--  2.0 unx       35 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/tests/__init__.py
--rw-r--r--  2.0 unx     1459 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/tests/test_l10n_br_pos_cfe.py
--rw-r--r--  2.0 unx      688 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/views/pos_payment_method_view.xml
--rw-r--r--  2.0 unx     2730 b- defN 23-Jun-27 01:09 odoo/addons/l10n_br_pos_cfe/views/pos_template.xml
--rw-r--r--  2.0 unx     5777 b- defN 23-Jun-27 01:11 odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jun-27 01:11 odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Jun-27 01:11 odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     5735 b- defN 23-Jun-27 01:11 odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/RECORD
-49 files, 146414 bytes uncompressed, 46506 bytes compressed:  68.2%
+Zip file size: 56628 bytes, number of entries: 49
+-rw-r--r--  2.0 unx     5159 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/__init__.py
+-rw-r--r--  2.0 unx     1367 b- defN 23-Jun-30 17:55 odoo/addons/l10n_br_pos_cfe/__manifest__.py
+-rw-r--r--  2.0 unx      386 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/demo/pos_config_demo.xml
+-rw-r--r--  2.0 unx     2614 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/demo/pos_payment_method_demo.xml
+-rw-r--r--  2.0 unx    17424 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/i18n/l10n_br_pos_cfe.pot
+-rw-r--r--  2.0 unx    17496 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/i18n/pt_BR.po
+-rw-r--r--  2.0 unx      206 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/models/__init__.py
+-rw-r--r--  2.0 unx     1577 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/models/pos_config.py
+-rw-r--r--  2.0 unx     1039 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/models/pos_order.py
+-rw-r--r--  2.0 unx     3165 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/models/pos_payment_method.py
+-rw-r--r--  2.0 unx      218 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      334 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       95 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/readme/CREDITS.rst
+-rw-r--r--  2.0 unx       99 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      506 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/readme/HISTORY.rst
+-rw-r--r--  2.0 unx      310 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/readme/INSTALL.rst
+-rw-r--r--  2.0 unx     9455 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/description/icon.png
+-rw-r--r--  2.0 unx    16325 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/description/index.html
+-rw-r--r--  2.0 unx     3075 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/css/pos.css
+-rw-r--r--  2.0 unx     2437 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/devices.js
+-rw-r--r--  2.0 unx     9855 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/fiscal_cfe.js
+-rw-r--r--  2.0 unx     9581 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/models.js
+-rw-r--r--  2.0 unx     1454 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/ChromeWidgets/ProxyStatus.js
+-rw-r--r--  2.0 unx      948 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/OrderManagementScreen/ReprintReceiptScreen.js
+-rw-r--r--  2.0 unx     1318 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/PaymentScreen/PaymentScreen.js
+-rw-r--r--  2.0 unx     5700 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderFooterReceipt.js
+-rw-r--r--  2.0 unx     1246 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderHeaderReceipt.js
+-rw-r--r--  2.0 unx      875 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderPaymentReceipt.js
+-rw-r--r--  2.0 unx     1414 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderRowReceipt.js
+-rw-r--r--  2.0 unx      890 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderSubtitleReceipt.js
+-rw-r--r--  2.0 unx     1306 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderTotalsReceipt.js
+-rw-r--r--  2.0 unx     1692 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/ReceiptScreen.js
+-rw-r--r--  2.0 unx     1063 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/SatOrderReceipt.js
+-rw-r--r--  2.0 unx     1998 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderFooterReceipt.xml
+-rw-r--r--  2.0 unx     1102 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderHeaderReceipt.xml
+-rw-r--r--  2.0 unx      440 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderPaymentReceipt.xml
+-rw-r--r--  2.0 unx     1272 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderRowReceipt.xml
+-rw-r--r--  2.0 unx     1235 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderSubtitleReceipt.xml
+-rw-r--r--  2.0 unx     1000 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderTotalsReceipt.xml
+-rw-r--r--  2.0 unx     3681 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/SatOrderReceipt.xml
+-rw-r--r--  2.0 unx       35 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/tests/__init__.py
+-rw-r--r--  2.0 unx     1459 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/tests/test_l10n_br_pos_cfe.py
+-rw-r--r--  2.0 unx      688 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/views/pos_payment_method_view.xml
+-rw-r--r--  2.0 unx     2730 b- defN 23-Jun-30 17:54 odoo/addons/l10n_br_pos_cfe/views/pos_template.xml
+-rw-r--r--  2.0 unx     5777 b- defN 23-Jun-30 17:55 odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jun-30 17:55 odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 23-Jun-30 17:55 odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     5735 b- defN 23-Jun-30 17:55 odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/RECORD
+49 files, 147899 bytes uncompressed, 46848 bytes compressed:  68.3%
```

## zipnote {}

```diff
@@ -129,20 +129,20 @@
 
 Filename: odoo/addons/l10n_br_pos_cfe/views/pos_payment_method_view.xml
 Comment: 
 
 Filename: odoo/addons/l10n_br_pos_cfe/views/pos_template.xml
 Comment: 
 
-Filename: odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/METADATA
+Filename: odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/WHEEL
+Filename: odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/top_level.txt
+Filename: odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/RECORD
+Filename: odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/l10n_br_pos_cfe/__manifest__.py

```diff
@@ -1,14 +1,14 @@
 # Copyright 2018 KMEE
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 {
     "name": "L10n Br Pos Cfe",
     "summary": """CF-e""",
-    "version": "14.0.1.2.0",
+    "version": "14.0.1.3.0",
     "license": "AGPL-3",
     "author": "KMEE,Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/l10n-brazil",
     "category": "Point Of Sale",
     "development_status": "Alpha",
     "maintainers": ["mileo", "lfdivino", "luismalta", "ygcarvalh"],
     "depends": [
```

## odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderFooterReceipt.js

### js-beautify {}

```diff
@@ -2,14 +2,16 @@
     "use strict";
 
     const PosComponent = require("point_of_sale.PosComponent");
     const Registries = require("point_of_sale.Registries");
 
     class OrderFooterReceipt extends PosComponent {
         mounted() {
+            this.footerEvent = new Event("footer-mounted");
+
             this._generateBarcode(this.getFormattedDocumentKey());
             this._generateQRCode();
 
             if (this.order.state_edoc === "cancelada") {
                 this._generateBarcodeCancel(this.getFormattedDocumentKeyCancel());
                 this._generateQRCodeCancel();
             }
@@ -32,21 +34,28 @@
                 displayValue: false,
                 height: 60,
                 width: 1.5,
             });
         }
 
         async _generateQRCode() {
+            const qrcode = document.getElementById("footer__qrcode");
+            new MutationObserver(this.dispatchEventOnQrCodeMounted.bind(this)).observe(
+                qrcode, {
+                    subtree: true,
+                    attributes: true,
+                    attributeFilter: ["style"],
+                }
+            );
+
             // eslint-disable-next-line
-            return await new QRCode(document.getElementById("footer__qrcode"), {
+            return await new QRCode(qrcode, {
                 text: this.getTextForQRCode(),
                 width: 275,
                 height: 275,
-                colorDark: "#000000",
-                colorLight: "#ffffff",
                 // eslint-disable-next-line
                 correctLevel: QRCode.CorrectLevel.L,
             });
         }
 
         getFormattedDocumentKey() {
             return this.order.document_key.replace("CFe", "");
@@ -83,26 +92,45 @@
             return authorization_date
                 .replaceAll("-", "")
                 .replaceAll(":", "")
                 .replaceAll("T", "");
         }
 
         async _generateQRCodeCancel() {
+            const qrcodeCancel = document.getElementById("footer__qrcode-cancel");
+            new MutationObserver(this.dispatchEventOnQrCodeMounted.bind(this)).observe(
+                qrcodeCancel, {
+                    subtree: true,
+                    attributes: true,
+                    attributeFilter: ["style"],
+                }
+            );
+
             // eslint-disable-next-line
-            return await new QRCode(document.getElementById("footer__qrcode-cancel"), {
+            return await new QRCode(qrcodeCancel, {
                 text: this.getTextForQRCodeCancel(),
                 width: 275,
                 height: 275,
-                colorDark: "#000000",
-                colorLight: "#ffffff",
                 // eslint-disable-next-line
                 correctLevel: QRCode.CorrectLevel.L,
             });
         }
 
+        dispatchEventOnQrCodeMounted(mutationList, observer) {
+            for (const mutation of mutationList) {
+                if (
+                    mutation.target.tagName === "IMG" &&
+                    mutation.target.style.display === "block"
+                ) {
+                    window.dispatchEvent(this.footerEvent);
+                    observer.disconnect();
+                }
+            }
+        }
+
         getTextForQRCodeCancel() {
             const orderDate = this.order.cancel_date;
             const qrCodeSignature = this.order.cancel_qrcode_signature;
             const orderTotalAmount = this.order.total_with_tax;
             const cnpjCpf = this.order.cnpj_cpf || "";
 
             const str = "";
```

## odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/ReceiptScreen.js

### js-beautify {}

```diff
@@ -1,29 +1,51 @@
 /*
-Copyright (C) 2016-Today KMEE (https://kmee.com.br)
-@author: Luis Felipe Mileo <mileo@kmee.com.br>
-@author: Luiz Felipe do Divino <luiz.divino@kmee.com.br>
-@author: Gabriel Cardoso <gabriel.cardoso@kmee.com.br>
- License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
+    Copyright (C) 2016-Today KMEE (https://kmee.com.br)
+    @author: Luis Felipe Mileo <mileo@kmee.com.br>
+    @author: Luiz Felipe do Divino <luiz.divino@kmee.com.br>
+    @author: Gabriel Cardoso <gabriel.cardoso@kmee.com.br>
+    @author: Felipe Zago <felipe.zago@kmee.com.br>
+    License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl.html).
 */
-
 odoo.define("l10n_br_pos_cfe.ReceiptScreen", function(require) {
     "use strict";
 
     const ReceiptScreen = require("point_of_sale.ReceiptScreen");
     const Registries = require("point_of_sale.Registries");
+    const {
+        useListener
+    } = require("web.custom_hooks");
+    const {
+        useExternalListener
+    } = owl.hooks;
+
+    const L10nBrPosCfeReceiptScreen = (ReceiptScreen_) =>
+        class extends ReceiptScreen_ {
+            setup() {
+                super.setup();
+
+                useListener("autoprint", this.cfePrinting);
+                useExternalListener(
+                    window,
+                    "footer-mounted",
+                    this.triggerAutoPrintEvent
+                );
+            }
 
-    const L10nBrPosCfeReceiptScreen = (ReceiptScreen_screen = ReceiptScreen) =>
-        class extends ReceiptScreen_screen {
             // @override
             async handleAutoPrint() {
+                return;
+            }
+
+            triggerAutoPrintEvent() {
                 if (this._shouldAutoPrint()) {
-                    setTimeout(() => this.cfePrinting(), 1000);
+                    this.trigger("autoprint");
                 }
             }
+
             async cfePrinting() {
                 await this.printReceipt();
                 if (this.currentOrder._printed && this._shouldCloseImmediately()) {
                     this.whenClosing();
                 }
             }
         };
```

## Comparing `odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/METADATA` & `odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo14-addon-l10n-br-pos-cfe
-Version: 14.0.1.2.0
+Version: 14.0.1.3.0
 Summary: CF-e
 Home-page: https://github.com/OCA/l10n-brazil
 Author: KMEE,Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/RECORD` & `odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/RECORD`

 * *Files 8% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 odoo/addons/l10n_br_pos_cfe/README.rst,sha256=ZbIiji2l0yzFNd_qhC-Z8mLu7PhptHLispRaCtKWP0k,5159
 odoo/addons/l10n_br_pos_cfe/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/l10n_br_pos_cfe/__manifest__.py,sha256=ivKmJ2-GqCGg1ldGOW4x8xh7snAvYM8QpwEnysZdJ3o,1367
+odoo/addons/l10n_br_pos_cfe/__manifest__.py,sha256=R7y1-SANWw2bX0aq3XtckZZUrrpIYzBnD6Lgii_bkgU,1367
 odoo/addons/l10n_br_pos_cfe/demo/pos_config_demo.xml,sha256=6heepHS9X6FzJtuaDTjpAsa2M-97oaJmeVHuEhK1BHg,386
 odoo/addons/l10n_br_pos_cfe/demo/pos_payment_method_demo.xml,sha256=bkj8TTzvoXpmGIhFP56KMbmXYkyEgYH9Fl-TUjf-SHs,2614
 odoo/addons/l10n_br_pos_cfe/i18n/l10n_br_pos_cfe.pot,sha256=JDCuaslqY_DJBeFG-IyK1ulXWwNSreIvERhOuOFFW8Q,17424
 odoo/addons/l10n_br_pos_cfe/i18n/pt_BR.po,sha256=QET4JbQX-aq_CyAspiC5DAwZ5Ya34e5fvxn4YYGL9fQ,17496
 odoo/addons/l10n_br_pos_cfe/models/__init__.py,sha256=gHqe8XQxTggqFAfOIk7SX9z9AM9JIRI9aVu5cfBozbc,206
 odoo/addons/l10n_br_pos_cfe/models/pos_config.py,sha256=eeGIs-hTh5sRHyou2n4nGzseA2Ji335gzQ4XEFuTwa0,1577
 odoo/addons/l10n_br_pos_cfe/models/pos_order.py,sha256=CmDYlxWxDRYr0cjPPxK9I04Ujfsi7HktbnZ9piLH6NY,1039
@@ -20,30 +20,30 @@
 odoo/addons/l10n_br_pos_cfe/static/src/css/pos.css,sha256=AsILjQmBX63ysKlGeyNKYq4V83zgvF_wG53jrUWlO8I,3075
 odoo/addons/l10n_br_pos_cfe/static/src/js/devices.js,sha256=4JW4oREJ41HqjnvvKPrKddXUPbr3CJZZe9TBY4SIlAY,2437
 odoo/addons/l10n_br_pos_cfe/static/src/js/fiscal_cfe.js,sha256=KHMoK-VoWhtgTE4HIZriEnrMFL3ld3wmKugGwSncp6g,9855
 odoo/addons/l10n_br_pos_cfe/static/src/js/models.js,sha256=nqhur-KQd_JEaLVRWBteeA0heAR_rHTo4kkqCMwsTWU,9581
 odoo/addons/l10n_br_pos_cfe/static/src/js/ChromeWidgets/ProxyStatus.js,sha256=VGs5y1RdMwQb398lfaqFCAR_epF4_PWiC9FD94H0Td0,1454
 odoo/addons/l10n_br_pos_cfe/static/src/js/OrderManagementScreen/ReprintReceiptScreen.js,sha256=n5SKpwtrgJ4HhqqsYPyVIsR1YnjBU2a-7-gI7AJFkQo,948
 odoo/addons/l10n_br_pos_cfe/static/src/js/PaymentScreen/PaymentScreen.js,sha256=pVZDt6kcqM6qF9uOJph5aaDgsZ1iyBifNeVb3PABNPI,1318
-odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderFooterReceipt.js,sha256=QEuoCzbIXmw8ek3bQbmJu5hOwXAHl4vU9B150an4vys,4715
+odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderFooterReceipt.js,sha256=4SWyqTZT-MjUAISkYVmD9AhtFVT5UAPf3yEyPmN4UGw,5700
 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderHeaderReceipt.js,sha256=hsAWCHHPcnTb0XH0heGQbfNA7FK6wI1b93KVsXqZHmc,1246
 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderPaymentReceipt.js,sha256=KugJfnHj4CIZ7s898fkIV8m3t-EOIFrGth3f2G7yQAU,875
 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderRowReceipt.js,sha256=clGY3FTc0i0RfFeAqj11nf6AyMYHIIaBBX_TPX19poE,1414
 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderSubtitleReceipt.js,sha256=mkd-xn8bnFuqzxcFvkQoMr0mXxXykS4OVjSz06GmXbE,890
 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/OrderTotalsReceipt.js,sha256=Dps8EBtMwwXTzcOLpkFq_HAVTO3y5-Ro0bhnCfNpa_E,1306
-odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/ReceiptScreen.js,sha256=jgtTWtVsut3aaLGr6QlUT4YbokfFKLh_9b9fyUVZZxI,1192
+odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/ReceiptScreen.js,sha256=4gicYa5Zu-kdnULZ8hI2KU8csg6Pj1897I8pTs7tL5c,1692
 odoo/addons/l10n_br_pos_cfe/static/src/js/ReceiptScreen/SatOrderReceipt.js,sha256=FFl_D1WsyOmRaHB48jyMEL10b_rJKdOFx57rxrNmqVA,1063
 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderFooterReceipt.xml,sha256=TSV4EAKXb9uk4aBxFka-mDFzSW-2fT0lacs0-4L3TWE,1998
 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderHeaderReceipt.xml,sha256=KhP9sjF8TGvWL9sEzrwcfqxTmUh1HGTZS5lrQT2kGbo,1102
 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderPaymentReceipt.xml,sha256=fwKHKZ458QFcuVqG4lpfbVGN8sG-GtszE1ThDK0lLmw,440
 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderRowReceipt.xml,sha256=dXnfJ6wV7EZaHVTtkwG4WRaMkNdEIs6pxqoLFcqR6ts,1272
 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderSubtitleReceipt.xml,sha256=ShY00WNOmADuJxdoMkSuKsDKL8Pvav5TX7Y-zb5N7LY,1235
 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/OrderTotalsReceipt.xml,sha256=-e_2_PIcydclLxeQRI60EAYdF8js3CkHj6JVpBDiRrA,1000
 odoo/addons/l10n_br_pos_cfe/static/src/xml/Screens/ReceiptScreen/SatOrderReceipt.xml,sha256=dP4Agqf4qbL902XFo0e0j6HBKcjxFj_NnwUQHEBjDCk,3681
 odoo/addons/l10n_br_pos_cfe/tests/__init__.py,sha256=5eIgjBIfyOoo7ziQ2huWVM0lhDM9-K_aYofxYKr2eIE,35
 odoo/addons/l10n_br_pos_cfe/tests/test_l10n_br_pos_cfe.py,sha256=Pl_bt9QFyrqOUk6va57O7usXIRX5r7UsInwxrINMPx0,1459
 odoo/addons/l10n_br_pos_cfe/views/pos_payment_method_view.xml,sha256=QprZUI90Dfmzxm7y-UrPg2RoH7QBvNl5vgVwWZP4eRU,688
 odoo/addons/l10n_br_pos_cfe/views/pos_template.xml,sha256=nQ7u5mURSQYdL5bQqj8FVd608y_5NN7AJxNkFJxsrHU,2730
-odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/METADATA,sha256=WUHYUMO6meCGwI83aPs_60JpDLIwI8MQ3Oba-iFLVkw,5777
-odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo14_addon_l10n_br_pos_cfe-14.0.1.2.0.dist-info/RECORD,,
+odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/METADATA,sha256=xPy9VImwuKUoBk0UvzJQ_8pMQKIljryOUwOb1PkN-ew,5777
+odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo14_addon_l10n_br_pos_cfe-14.0.1.3.0.dist-info/RECORD,,
```

